{% extends "base.html" %}

{% block title %}Vielen Dank! | AO Mobile{% endblock %}

{% block styles %}
<style>
    /* Spezifische Styles f√ºr die Erfolgsseite */
    .success-container {
        min-height: calc(100vh - 80px); /* Abzug Header-H√∂he */
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }
    
    .card { 
        background: white; 
        padding: 50px; 
        border-radius: 20px; 
        text-align: center; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.1); 
        max-width: 600px; 
        width: 100%;
        animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .icon { font-size: 60px; margin-bottom: 20px; display: inline-block; animation: bounce 2s infinite; }
    
    h1 { color: var(--primary-color); margin-bottom: 10px; font-weight: 700; }
    p { color: #666; font-size: 16px; line-height: 1.6; margin-bottom: 30px; }
    
    .product-names { 
        font-weight: 600; color: #333; background: #e3f2fd; padding: 10px 20px; 
        border-radius: 8px; display: inline-block; margin: 10px 0 30px 0;
    }

    .btn-group { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
    
    .btn-success { 
        padding: 15px 30px; border-radius: 30px; text-decoration: none; 
        font-weight: 600; transition: 0.2s; border: none; cursor: pointer; 
    }
    .btn-home { background: #f0f0f0; color: #555; }
    .btn-home:hover { background: #e0e0e0; }
    .btn-acc { background: var(--primary-color); color: white; box-shadow: 0 4px 15px rgba(0,123,255,0.3); }
    .btn-acc:hover { background: #0056b3; transform: translateY(-2px); }

    @keyframes popIn { from { transform: scale(0.8); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    @keyframes bounce { 0%, 20%, 50%, 80%, 100% {transform: translateY(0);} 40% {transform: translateY(-10px);} 60% {transform: translateY(-5px);} }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="card">
        <div class="icon">üéâ</div>
        <h1>Vielen Dank f√ºr deinen Einkauf!</h1>
        
        <p>Deine Bestellung war erfolgreich.<br>Wir werden folgende Ger√§te so schnell wie m√∂glich versandfertig machen:</p>
        
        <div id="items-display" class="product-names">
            Lade Daten...
        </div>

        <p style="font-size:14px; color:#999;">Eine Best√§tigung wurde an deine E-Mail gesendet.</p>

        <div class="btn-group">
            <a href="/" class="btn-success btn-home">Zur√ºck zum Start</a>
            <a href="/userpage" class="btn-success btn-acc">Zu meinem Account</a>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<script>
    // 1. Produktnamen aus der URL holen
    const params = new URLSearchParams(window.location.search);
    const items = params.get('items');
    
    if (items) {
        document.getElementById('items-display').innerText = items;
    } else {
        document.getElementById('items-display').innerText = "Deine neuen Ger√§te";
    }

    // 2. Konfetti Animation starten
    function fireConfetti() {
        var duration = 3000;
        var end = Date.now() + duration;

        (function frame() {
            confetti({
                particleCount: 5,
                angle: 60,
                spread: 55,
                origin: { x: 0, y: 0.6 },
                colors: ['#007bff', '#00d2ff', '#ffffff']
            });
            confetti({
                particleCount: 5,
                angle: 120,
                spread: 55,
                origin: { x: 1, y: 0.6 },
                colors: ['#007bff', '#00d2ff', '#ffffff']
            });

            if (Date.now() < end) {
                requestAnimationFrame(frame);
            }
        }());
    }

    // Starten sobald die Seite und die Base-Logik bereit sind
    window.onload = fireConfetti;
</script>
{% endblock %}